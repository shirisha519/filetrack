InwardSearch.js
import React, { useState, useEffect } from "react";
import axios from "axios";
import "./InwardSearch.css";

const InwardSearch = () => {
  const [inwardNo, setInwardNo] = useState("");
  const [formData, setFormData] = useState({
    fromDate: new Date().toISOString().split("T")[0],
    toDate: new Date().toISOString().split("T")[0],
    cpCamp: "",
    cyberOffice: "",
    seatNo: "",
    fileNo: "",
    year: "",
    receivedFrom: "",
    receivedFromDate: new Date().toISOString().split("T")[0],
    receivedToDate: new Date().toISOString().split("T")[0],
  });

  const [searchResults, setSearchResults] = useState("");

  useEffect(() => {
    const fetchInwardNo = async () => {
      try {
        const response = await axios.get("http://localhost:5000/api/inward/next-inward-no");
        setInwardNo(response.data.inwardNo);
      } catch (error) {
        console.error("Error fetching inward no:", error);
      }
    };
    fetchInwardNo();
  }, []);

  const handleChange = (e) => {
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  const handleSearch = async () => {
    try {
      const response = await axios.post("http://localhost:5000/api/inward/search", {
        fromDate: formData.fromDate,
        toDate: formData.toDate,
      });
      setSearchResults(JSON.stringify(response.data, null, 2));
    } catch (error) {
      console.error("Search error:", error);
      setSearchResults("No results or error occurred.");
    }
  };

  const handleReceivedDateSearch = async () => {
    try {
      const response = await axios.post("http://localhost:5000/api/inward/search", {
        fromDate: formData.receivedFromDate,
        toDate: formData.receivedToDate,
      });
      setSearchResults(JSON.stringify(response.data, null, 2));
    } catch (error) {
      console.error("Received Date Range Search error:", error);
      setSearchResults("No results or error occurred.");
    }
  };

  const handleViewFile = () => {
    try {
      const data = JSON.parse(searchResults);
      const file = data?.[0]?.fileUpload;
      if (file) {
        window.open(`http://localhost:5000/${file}`, "_blank");
      } else {
        alert("No file available to view.");
      }
    } catch {
      alert("Please search first, no data available.");
    }
  };

  const handleDownloadFile = () => {
    try {
      const data = JSON.parse(searchResults);
      const file = data?.[0]?.fileUpload;
      if (file) {
        const link = document.createElement("a");
        link.href = `http://localhost:5000/${file}`;
        link.download = "";
        link.click();
      } else {
        alert("No file available to download.");
      }
    } catch {
      alert("Please search first, no data available.");
    }
  };

  return (
    <div className="inward-search-page">
      <div className="inward-search-container">
        <h2 className="form">INWARD SEARCH</h2>
        <h2 className="sub">New Receipts Admin and Account Branch</h2>

        {/* Top row: Inward No + Date */}
        <div className="top-row">
          <div className="top-left">
            <label>Inward No:</label>
            <input type="text" value={inwardNo} readOnly className="input-field" />
          </div>
          <div className="top-right">
            <label>Date:</label>
            <input type="date" name="fromDate" value={formData.fromDate} onChange={handleChange} className="date-field" />
          </div>
        </div>

        {/* Main Inputs */}
        <div className="form-section">
          <label>CP Camp:</label>
          <input type="text" name="cpCamp" value={formData.cpCamp} onChange={handleChange} className="input-field" />

          <label>Cyber Office:</label>
          <input type="text" name="cyberOffice" value={formData.cyberOffice} onChange={handleChange} className="input-field" />

          <label>Seat No:</label>
          <input type="text" name="seatNo" value={formData.seatNo} onChange={handleChange} className="input-field" />

          <label>File No:</label>
          <input type="text" name="fileNo" value={formData.fileNo} onChange={handleChange} className="input-field" />

          <label>Year:</label>
          <input type="number" name="year" value={formData.year} onChange={handleChange} className="input-field" />

          <label>Received From:</label>
          <input type="text" name="receivedFrom" value={formData.receivedFrom} onChange={handleChange} className="input-field" />
        </div>

        {/* Search / View / Download Buttons */}
        <div className="button-section">
          <button onClick={handleSearch} className="search-button">Search</button>
          <button onClick={handleViewFile} className="search-button">View</button>
          <button onClick={handleDownloadFile} className="search-button">Download</button>
        </div>

        {/* Received Date Range Search */}
        <div className="received-date-range">
          <label>Received Date Range:</label>
          <div className="received-date-row">
            <input type="date" name="receivedFromDate" value={formData.receivedFromDate} onChange={handleChange} className="date-field" />
            <span className="range-gap">to</span>
            <input type="date" name="receivedToDate" value={formData.receivedToDate} onChange={handleChange} className="date-field" />
            <button onClick={handleReceivedDateSearch} className="search-button range-search-button">Search</button>
          </div>
        </div>

        {/* Results */}
        <div className="results-section">
          <label>Results:</label>
          <textarea rows={10} className="results-textarea" value={searchResults} readOnly></textarea>
        </div>
      </div>
    </div>
  );
};

export default InwardSearch;
when click the search it shows result in result textarea and view and download are working and provide ful code